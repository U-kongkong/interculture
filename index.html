<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Intercultural Adventure</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#dff7e3;
  --panel:#fff9e6;
  --border:#c9bca6;
  --accent:#7cc37c;
  --accent-dark:#5da15d;
  --text:#444;
}

/* 기본 설정 */
*{box-sizing:border-box;}
body{
  margin:0;
  padding:0;
  min-height:100vh;
  background:var(--bg);
  font-family:"Quicksand", sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}

/* 외부 프레임 */
.frame{
  width:100%;
  max-width:980px;
  background:var(--panel);
  border:4px solid var(--border);
  border-radius:25px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
  padding:26px;
}

/* 제목 영역 */
.title-area{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:16px;
}
.leaf-icon{
  width:26px;height:26px;
  background:#7cc37c;
  mask:url('https://upload.wikimedia.org/wikipedia/commons/3/39/Animal_Crossing_Leaf.svg') center/contain no-repeat;
}
h1{
  margin:0;
  font-size:26px;
  color:var(--accent-dark);
}
.subtitle{
  font-size:13px;
  color:#777;
}

/* 메인 패널 */
.panel{
  background:#ffffff;
  border:2px solid var(--border);
  border-radius:22px;
  padding:20px;
  margin-top:12px;
  box-shadow:0 4px 14px rgba(0,0,0,0.1);
}

/* 비디오 크기 */
.video-wrap{
  width:100%;
  border-radius:18px;
  overflow:hidden;
  margin-top:12px;
}
.video-wrap video{
  width:100%;
  height:480px;
  object-fit:cover;
  background:#000;
}

/* 버튼 공통 */
.btn{
  display:inline-block;
  padding:12px 20px;
  margin-top:14px;
  border-radius:999px;
  background:var(--accent);
  color:#fff;
  font-weight:700;
  font-size:16px;
  border:none;
  cursor:pointer;
  transition:0.15s;
}
.btn:hover{
  background:var(--accent-dark);
}
.btn.secondary{
  background:#fff;
  color:var(--accent);
  border:2px solid var(--accent);
}

/* 옵션 버튼 */
.option-btn{
  width:100%;
  border:2px solid var(--accent);
  background:#ffffff;
  padding:14px;
  border-radius:16px;
  font-size:16px;
  cursor:pointer;
  margin-top:10px;
  text-align:left;
  transition:0.15s;
}
.option-btn:hover{
  background:#e9f7ec;
  transform:translateY(-2px);
}

.center{
  text-align:center;
  margin-top:10px;
}
.scene-title{
  font-weight:700;
  font-size:18px;
  margin-bottom:6px;
  color:var(--accent-dark);
}
.prompt{
  font-size:16px;
  color:var(--text);
}
</style>
</head>

<body>
<div class="frame">
  <div class="title-area">
    <div class="leaf-icon"></div>
    <div>
      <h1>Intercultural Adventure</h1>
      <div class="subtitle">Choose your reaction and see how the story changes.</div>
    </div>
  </div>

  <div id="gameArea"></div>
</div>

<script>
/* --------------------------------
   씬 데이터 (A=Asia, B=English, C=Central Europe)
----------------------------------- */

const scenes = [
  {
    id:"S1",
    title:"Scene 1 — Scheduling the Meeting",
    openingVideo:"media/S1_opening.mp4",
    prompt:"You and your partner need to set a time for your first team meeting. How do you respond?",
    options:[
      {text:"I'm fine with any time. Whatever is most convenient for you.", video:"media/S1_A.mp4"},
      {text:"I can meet Tuesday at 3 or Thursday at 10. Which works for you?", video:"media/S1_B.mp4"},
      {text:"I'm flexible most afternoons. We can decide the exact time later.", video:"media/S1_C.mp4"}
    ]
  },
  {
    id:"S2",
    title:"Scene 2 — Partner's Topic: K-Food & BTS",
    openingVideo:"media/S2_opening.mp4",
    prompt:"Your partner suggests a topic: “Korean Food and BTS: How They Improve Intercultural Communication.” How do you react?",
    options:[
      {text:"That's interesting. Maybe we can add another perspective to make it more balanced.", video:"media/S2_A.mp4"},
      {text:"Yeah, but I don't think BTS and food match the assignment that well. Maybe we need something more academic.", video:"media/S2_B.mp4"},
      {text:"The idea is fun and creative. What if we make it bigger, like how K-pop influences global cultural identity?", video:"media/S2_C.mp4"}
    ]
  },
  {
    id:"S3",
    title:"Scene 3 — PPT Design Conflict",
    openingVideo:"media/S3_opening.mp4",
    prompt:"Your partner sends you a PPT draft, but you don't like the design. What do you do?",
    options:[
      {text:"This looks really good. Would it be okay if I adjust a few details later?", video:"media/S3_A.mp4"},
      {text:"The slides are good, but the layout is confusing. Can I redesign this section?", video:"media/S3_B.mp4"},
      {text:"You send a revised file back without explaining in advance.", video:"media/S3_C.mp4"}
    ]
  },
  {
    id:"S4",
    title:"Scene 4 — Professor Rejects the Idea",
    openingVideo:"media/S4_opening.mp4",
    prompt:"The professor says, “I think your topic needs to be changed.” What do you do?",
    options:[
      {text:"I'll check past examples and adjust the idea on my own.", video:"media/S4_A.mp4"},
      {text:"Let's ask the professor directly for clarification.", video:"media/S4_B.mp4"},
      {text:"Let's discuss together and understand what the professor really wants.", video:"media/S4_C.mp4"}
    ]
  }
];

let currentScene = -1;

/* -------------------------
   0. 오프닝 화면
-------------------------- */
function showOpening(){
  document.getElementById("gameArea").innerHTML = `
    <div class="panel">
      <p class="prompt">
        The professor announces the final assignment: choose an intercultural communication theory and apply it to a real-world example.
        You are paired with a Korean student for a team project.
      </p>
      <div class="video-wrap">
        <video controls>
          <source src="media/opening.mp4" type="video/mp4">
        </video>
      </div>
      <div class="center">
        <button class="btn" onclick="goToScene(0)">Start Game</button>
      </div>
    </div>
  `;
}

/* -------------------------
   1. 각 씬 오프닝 영상
-------------------------- */
function goToScene(index){
  currentScene = index;
  const sc = scenes[index];

  document.getElementById("gameArea").innerHTML = `
    <div class="panel">
      <div class="scene-title">${sc.title}</div>
      <p class="prompt">Watch the situation first.</p>
      <div class="video-wrap">
        <video autoplay controls>
          <source src="${sc.openingVideo}" type="video/mp4">
        </video>
      </div>
      <div class="center">
        <button class="btn" onclick="showSceneChoices()">Next</button>
      </div>
    </div>
  `;
}

/* -------------------------
   2. 옵션 선택 화면 (순서 랜덤)
-------------------------- */
function showSceneChoices(){
  const sc = scenes[currentScene];

  // 옵션 배열 복사 후 랜덤 섞기
  let shuffledOptions = [...sc.options];
  shuffledOptions.sort(() => Math.random() - 0.5);

  let optionsHTML = "";
  shuffledOptions.forEach(op=>{
    optionsHTML += `
      <button class="option-btn" onclick="playReactionByText('${op.text.replace(/'/g,"\\'")}')">
        ${op.text}
      </button>
    `;
  });

  document.getElementById("gameArea").innerHTML = `
    <div class="panel">
      <div class="scene-title">${sc.title}</div>
      <p class="prompt">${sc.prompt}</p>
      <div class="center">
        <p style="margin-top:8px;font-weight:600;">Choose your reaction:</p>
      </div>
      ${optionsHTML}
    </div>
  `;
}

/* 선택된 텍스트로 옵션 인덱스 찾기 */
function playReactionByText(text){
  const sc = scenes[currentScene];
  const index = sc.options.findIndex(o => o.text === text);
  playReaction(index);
}

/* -------------------------
   3. 선택 리액션 영상
-------------------------- */
function playReaction(index){
  const sc = scenes[currentScene];
  const chosen = sc.options[index];

  document.getElementById("gameArea").innerHTML = `
    <div class="panel">
      <div class="scene-title">${sc.title}</div>
      <p class="prompt">You selected: ${chosen.text}</p>
      <div class="video-wrap">
        <video autoplay controls>
          <source src="${chosen.video}" type="video/mp4">
        </video>
      </div>
      <div class="center">
        <button class="btn secondary" onclick="nextScene()">Next Scene</button>
      </div>
    </div>
  `;
}

/* -------------------------
   4. 다음 씬 or 엔딩
-------------------------- */
function nextScene(){
  if(currentScene + 1 >= scenes.length){
    showEnding();
    return;
  }
  goToScene(currentScene + 1);
}

/* -------------------------
   5. 엔딩
-------------------------- */
function showEnding(){
  document.getElementById("gameArea").innerHTML = `
    <div class="panel">
      <p class="prompt">
        Despite different communication styles, you and your partner succeeded in completing the project.
      </p>
      <div class="video-wrap">
        <video autoplay controls>
          <source src="media/ending.mp4" type="video/mp4">
        </video>
      </div>
      <div class="center">
        <p style="margin-top:12px;">
          “Different cultures. Different approaches. One successful team project.”<br>
          “Diversity strengthens teamwork.”
        </p>
        <button class="btn" onclick="showOpening()">Restart</button>
      </div>
    </div>
  `;
}

/* 게임 시작 */
showOpening();
</script>

</body>
</html>
